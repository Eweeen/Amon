{"version":3,"file":"/js/chat.js","mappings":"AAAAA,GAAE,WAQE,IAAIC,EAAcC,OAAOC,WAEP,IAAIC,gBAAgBF,OAAOG,SAASC,QAItDN,EAAE,kBAAkBO,MAAK,WACrB,IAAIC,EAAMR,EAAES,MAAMC,OAEdF,EAAIG,OAAS,GACbX,EAAES,MAAMG,KAAKJ,EAAIK,UAAU,EAAG,KAE9Bb,EAAES,MAAMG,KAAKJ,EAAIK,UAAU,EAAG,IAAM,UAY5Cb,EAAE,YAAYc,OAAM,WAChBd,EAAES,MAAMM,OAAOC,IAAI,CACf,QAAW,IACX,WAAc,YAElBhB,EAAEiB,UAAUC,GAAG,SAAS,SAASC,GACxBnB,EAAEmB,EAAMC,QAAQC,QAAQ,oBAAoBV,QAC7CX,EAAE,YAAYe,OAAOC,IAAI,CACrB,QAAW,IACX,WAAc,iBAY1Bf,EAAc,KACdD,EAAE,cAAcc,OAAM,WAClBd,EAAE,SAASgB,IAAI,OAAQ,MAGvBhB,EAAE,cACFA,EAAE,aAAac,OAAM,WACjBd,EAAE,SAASgB,IAAI,OAAQ,cAI/BhB,EAAE,cAAcsB,QAAQC,SAAS,cAEjCvB,EAAE,cAAcc,OAAM,WACbd,EAAES,MAAMe,SAAS,gBAClBxB,EAAE,cAAcO,MAAK,WACjBP,EAAE,cAAcyB,YAAY,iBAGhCzB,EAAES,MAAMc,SAAS,mBAK7BvB,EAAE,cAAcO,MAAK,WACjBP,EAAES,MAAMK,OAAM,WACCd,EAAES,MAAMiB,KAAK,sBAmBhC1B,EAAE,cAAgBA,EAAE,kBACpBA,EAAE,aAAa2B,SAAQ,SAASR,GACP,IAAjBA,EAAMS,UAGeC,SACN7B,EAAES,MAAMqB,MAIvB9B,EAAES,MAAMqB,IAAI,QAGpB9B,EAAE,iBAAiBc,OAAM,WAGAe,SACN7B,EAAES,MAAMqB,MAIvB9B,EAAE,aAAa8B,IAAI,QAGvBC,QAAQC,IAAI","sources":["webpack:///./resources/js/chat.js"],"sourcesContent":["$(function() {\r\n\r\n    /**\r\n     *\r\n     *  VARIABLES\r\n     * \r\n     */\r\n\r\n    let windowWidth = window.innerWidth;\r\n    let url = \"../app/ajax/get-chat.php\";\r\n    let searchParam = new URLSearchParams(window.location.search);\r\n    let dataConv;\r\n\r\n\r\n    $(\".conv_last_msg\").each(function() {\r\n        let str = $(this).text();\r\n\r\n        if (str.length < 35) {\r\n            $(this).html(str.substring(0, 35));\r\n        } else {\r\n            $(this).html(str.substring(0, 35) + \"...\");\r\n        }\r\n\r\n    });\r\n\r\n\r\n    /**\r\n     *\r\n     *  SHOW MODALS WITH 3 DOT BTN\r\n     * \r\n     */\r\n\r\n    $(\".btn_dot\").click(function() {\r\n        $(this).next().css({\r\n            \"opacity\": \"1\",\r\n            \"visibility\": \"visible\"\r\n        });\r\n        $(document).on(\"click\", function(event) {\r\n            if (!$(event.target).closest(\".modal_container\").length) {\r\n                $(\".btn_dot\").next().css({\r\n                    \"opacity\": \"0\",\r\n                    \"visibility\": \"hidden\"\r\n                });\r\n            }\r\n        });\r\n    });\r\n\r\n    /**\r\n     *\r\n     *  WHEN SELECT CONV ITEM, LAUNCH AJAX REQUEST, ADD CLASS TO SHOW ACTIVE CONVERSATION\r\n     * \r\n     */\r\n\r\n    if (windowWidth < 992) {\r\n        $(\".item_conv\").click(function() {\r\n            $(\"#chat\").css(\"left\", 0);\r\n        })\r\n\r\n        if ($(\".btn_back\")) {\r\n            $(\".btn_back\").click(function() {\r\n                $(\"#chat\").css(\"left\", \"-100%\");\r\n            })\r\n        }\r\n    } else {\r\n        $(\".item_conv\").first().addClass(\"actif_conv\");\r\n\r\n        $(\".item_conv\").click(function() {\r\n            if (!$(this).hasClass(\"actif_conv\")) {\r\n                $(\".item_conv\").each(function() {\r\n                    $(\".item_conv\").removeClass(\"actif_conv\");\r\n                    // REQUEST AJAX\r\n                });\r\n                $(this).addClass(\"actif_conv\");\r\n            }\r\n        });\r\n    }\r\n\r\n    $(\".item_conv\").each(function() {\r\n        $(this).click(function() {\r\n            dataConv = $(this).attr(\"data-conv\");\r\n            let data = {\r\n                \"data_conv\": dataConv\r\n            };\r\n            // setAjax(url, data);\r\n        })\r\n    });\r\n\r\n\r\n\r\n\r\n\r\n});\r\n\r\n/**\r\n *  CHAT BAR\r\n */\r\n\r\n// Si l'on appuie sur le bouton enoyer ou que l'on appuie sur entrer lorsque nous sommes dans l'input, le message s'envoi dans la conversation\r\nif ($(\"#chat_bar\") && $(\"#send_msg_btn\")) {\r\n    $(\"#chat_bar\").keydown(function(event) {\r\n        if (event.keyCode == 13) {\r\n            //lancer une requete ajax pour récuperer le contenue de l'input et l'afficher dans la conversation\r\n            let data = {\r\n                    \"data_conv\": dataConv,\r\n                    \"msg\": $(this).val()\r\n                }\r\n                // setAjax(url, data);\r\n\r\n            $(this).val(\"\");\r\n        }\r\n    });\r\n    $(\"#send_msg_btn\").click(function() {\r\n        //lancer une requete ajax pour récuperer le contenue de l'input et l'afficher dans la conversation\r\n        let data = {\r\n                \"data_conv\": dataConv,\r\n                \"msg\": $(this).val()\r\n            }\r\n            // setAjax(url, data);\r\n\r\n        $(\"#chat_bar\").val(\"\");\r\n    });\r\n} else {\r\n    console.log(\"suce\");\r\n}\r\n\r\n/**\r\n *  FUNCTION SET AJAX\r\n */\r\n\r\nfunction chatAjax(data) {\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        }\r\n    });\r\n    $.ajax({\r\n        type: \"POST\",\r\n        url: 'requestPraticien',\r\n        data: {\r\n            praticien_id: $(this).attr(\"data-id\")\r\n        },\r\n        success: function(data) {\r\n            $('.profil_praticien_container').html(data);\r\n        },\r\n        error: function(data) {\r\n            console.log(data);\r\n        }\r\n    });\r\n}\r\n\r\n\r\n// setInterval(() => {\r\n//     let data = {\r\n//         \"data_conv\": dataConv\r\n//     }\r\n//     setAjax(url, data);\r\n// }, 2000);\r\n\r\n\r\n// setInterval(() => {\r\n//     $(\"#chat\").load(\"../public/ajax/get-chat.php\");\r\n// }, 500)"],"names":["$","windowWidth","window","innerWidth","URLSearchParams","location","search","each","str","this","text","length","html","substring","click","next","css","document","on","event","target","closest","first","addClass","hasClass","removeClass","attr","keydown","keyCode","dataConv","val","console","log"],"sourceRoot":""}